<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Detalle del producto</title>
    <h:outputStylesheet library="css" name="bootstrap.min.css"/>
    <h:outputStylesheet library="css" name="styles.css"/>
    <h:outputScript library="js" name="bootstrap.bundle.min.js"/>
</h:head>
<h:body>
    <div class="container">
        <p>#{detalleProductoBean.producto}</p>

        <p:panel header="Comentarios">
            <p:dataList id="lista-c" value="#{detalleProductoBean.comentarios}" var="comentario" emptyMessage="No hay comentarios">
                <p>#{comentario.mensaje} - #{comentario.usuario.nombre}</p>
                <p:rating value="#{comentario.calificacion}" readonly="true" />

            </p:dataList>
        </p:panel>
        <p:panel header="Hacer un comentario" styleClass="mt-3" >
            <h:form id="crear-comentario">
                <h:panelGrid columns="2" cellpadding="3">
                    <p:inputTextarea value="#{detalleProductoBean.nuevoComentario.mensaje}"
                                     required="true" styleClass="comentario-usuario" />
                    <p:rating value="#{detalleProductoBean.nuevoComentario.calificacion}"
                              required="true"/>
                </h:panelGrid>
                <p:commandButton value="Comentar" icon="pi pi-comment" iconPos="left" update="@form,
lista-c" styleClass="mt-4" action="#{detalleProductoBean.crearComentario}" />
                <p:growl for="msj-pregunta" showDetail="true" />
            </h:form>
        </p:panel>

    </div>



</h:body>
</html>

<div id="header">
<div class="cajon"></div>
<div class="px-3 py-2 bg-dark text-white">
    <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            <a href="/"
               class="d-flex align-items-center my-2 my-lg-0 me-lg-auto text-white text-decoration-none">
                <span class="pi pi-shopping-cart" style="font-size: 2rem;margin-right: 10px"></span>
                <span class="fs-4">Unishop</span>
            </a>
            <ul class="nav col-12 col-lg-auto my-2 justify-content-center my-md-0 text-small">
                <li>
                    <a href="/" class="nav-link text-white">
                        <i class="pi pi-home bi d-block mx-auto mb-1 " style="font-size: 1.5rem; align-content: center"></i>
                        Home
                    </a>
                </li>
                <li>
                    <a href="crear_Producto.xhtml" class="nav-link text-white" style=" align-content:center">
                        <i class="pi pi-save bi d-block mx-auto mb-1 " style="font-size: 1.5rem"></i>
                        crear porducto
                    </a>
                </li>
                <li>
                    <a href="mis_productos.xhtml" class="nav-link text-white">
                        <i class="pi pi-save bi d-block mx-auto mb-1 " style="font-size: 1.5rem"></i>
                        Mis productos
                    </a>
                </li>
                <li>
                    <a href="usuario/perfil.xhtml" class="nav-link text-white" style=" align-content: center">
                        <i class="pi pi-user bi d-block mx-auto mb-1 icon-menu" style="font-size: 1.5rem "></i>
                        usuario
                    </a>
                </li>
                <li>
                    <a href="" class="nav-link text-white" style=" align-content: center">
                        <i class="pi pi-dollar bi d-block mx-auto mb-1 icon-menu" style="font-size: 1.5rem "></i>
                        compras
                    </a>
                </li>
                <li>
                    <a href="usuario/carrito.xhtml" class="nav-link text-white" style=" align-content: center">
                        <i class="pi pi-shopping-cart bi d-block mx-auto mb-1 icon-menu" style="font-size: 1.5rem "></i>
                        carrito
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>
<div class="px-3 py-2 border-bottom mb-3">
    <div class="container d-flex flex-wrap justify-content-center">
        <div class="col-12 col-lg-auto mb-2 mb-lg-0 me-lg-auto">
            <h:form>
                <p:inputText style=" width: 300px" placeholder="buscar producto" required="true"
                             value="#{busquedaBean.busqueda}"/>
                <p:commandButton icon="pi pi-search" action="#{busquedaBean.buscar}" update="@form"/>
            </h:form>
        </div>
        <div class="text-end">
            <h:form>
                <p:commandButton value="login" styleClass="btn btn-light text-dark me-2"/>
                <p:commandButton value="Registrarse" styleClass="btn btn-primary"
                                 action="registrarUsuario?faces-redirect=true"/>
            </h:form>
        </div>
    </div>
</div>
</div>

<p:dialog header="Iniciar sesión" showEffect="fade" widgetVar="login" modal="true"
          rendered="#{!seguridadBean.autenticado}" >
<h:form >
    <h:panelGrid columns="3" cellpadding="5">
        <p:outputLabel for="email_login" value="Email:" />
        <p:inputText id="email_login" value="#{seguridadBean.email}" required="true" />
        <p:message for="email_login" />
        <p:outputLabel for="password_login" value="Password:" />
        <p:password id="password_login" value="#{seguridadBean.passaword}" required="true"/>
        <p:message for="password_login" />
    </h:panelGrid>
    <p:commandButton value="Iniciar Sesión" action="#{seguridadBean.iniciarSesion}"
                     styleClass="mt-4" update="@form" icon="pi pi-sign-in" iconPos="left" />
    <p:growl for="login-bean" showDetail="true" />
</h:form>
</p:dialog>


<div id="header">
<nav class="py-2 bg-light border-bottom">
    <div class="container d-flex flex-wrap">
        <ul class="nav me-auto">
            <li class="nav-item"><a href="index.xhtml" class="nav-link link-dark px-2 active"
                                    aria-current="page">Inicio</a></li>
            <li class="nav-item"><a href="usuario/crearProducto.xhtml"
                                    class="nav-link link-dark px-2">Crear producto</a></li>

        </ul>
        <ul class="nav">
            <li class="nav-item"><a href="#" class="nav-link link-dark px-2">Login</a></li>
            <li class="nav-item"><a href="registrarUsuario.xhtml"
                                    class="nav-link link-dark px-2">Registrar usuario</a></li>
        </ul>
    </div>
</nav>
<header class="py-3 mb-4 border-bottom">
    <div class="container d-flex flex-wrap justify-content-center">
        <a href="/" class="d-flex align-items-center mb-3 mb-lg-0 me-lg-auto text-dark text-decoration-none">
            <span class="pi pi-shopping-cart" style="font-size: 2rem;margin-right: 10px"></span>
            <span class="fs-4">Unishop</span>
        </a>

        <h:form>
            <div class="col-12 col-lg-auto mb-3 mb-lg-0 input-serch ui-inputgroup">
                <p:inputText style="width: 400px" placeholder="Que producto esta buscando?" required="true"
                             value="#{busquedaBean.busqueda}" size="50"/>
                <p:commandButton icon="pi pi-search" action="#{busquedaBean.buscar}" update="@form"/>
            </div>
        </h:form>

    </div>
</header>


</div>